<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Berlin" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="My Notes">
<meta property="og:url" content="https://berlin2022.github.io/page/363/index.html">
<meta property="og:site_name" content="My Notes">
<meta property="og:locale">
<meta property="article:author" content="Berlin">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="My Notes" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//mirrors.cqupt.edu.cn/cdnjs/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">



    <link href="//mirrors.cqupt.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">





<link rel="stylesheet" href="/css/style.css">



    <style> .article { opacity: 0;} </style>


<link href="//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


<title>My Notes</title>

<script src="//cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
<script src="//mirrors.cqupt.edu.cn/cdnjs/ajax/libs/clipboard.js/2.0.9/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//mirrors.cqupt.edu.cn/cdnjs/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js",
        scrollreveal: "//mirrors.cqupt.edu.cn/cdnjs/ajax/libs/scrollReveal.js/4.0.9/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js", "//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 6.2.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/oh_my_bug.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/"></a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags">标签云</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="/438898441@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" rel="noopener" href="https://github.com/Berlin2022/Berlin2022.github.io" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anaconda3/" rel="tag">Anaconda3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AutoHotKey/" rel="tag">AutoHotKey</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DirectoryLister/" rel="tag">DirectoryLister</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EFunction/" rel="tag">EFunction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ETResize/" rel="tag">ETResize</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Edge/" rel="tag">Edge</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FILTER/" rel="tag">FILTER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FastStone-Image-Viewer/" rel="tag">FastStone_Image_Viewer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FreeFileSync/" rel="tag">FreeFileSync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FrontMatter/" rel="tag">FrontMatter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Actions/" rel="tag">GitHub-Actions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Image-auto-upload-Plugin/" rel="tag">Image-auto-upload-Plugin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LaTex/" rel="tag">LaTex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Link-Shell-Extension/" rel="tag">Link-Shell-Extension</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lister/" rel="tag">Lister</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Movie/" rel="tag">Movie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/" rel="tag">SQLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TC-UP/" rel="tag">TC_UP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Total-Commander/" rel="tag">Total_Commander</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wechatsync/" rel="tag">Wechatsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bat/" rel="tag">bat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/" rel="tag">cmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataview/" rel="tag">dataview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dedecms/" rel="tag">dedecms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emeditor/" rel="tag">emeditor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/" rel="tag">excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fiddler/" rel="tag">fiddler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ghost/" rel="tag">ghost</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitee/" rel="tag">gitee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/" rel="tag">gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo-abbrlink/" rel="tag">hexo-abbrlink</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo-permalink-pinyin/" rel="tag">hexo-permalink-pinyin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http%E4%BB%A3%E7%90%86/" rel="tag">http代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linter/" rel="tag">linter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maoxian-web-clipper/" rel="tag">maoxian-web-clipper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mathjax/" rel="tag">mathjax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mermaid/" rel="tag">mermaid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/navicate/" rel="tag">navicate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node%C2%B7js/" rel="tag">node·js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notepad/" rel="tag">notepad++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm-scripts/" rel="tag">npm-scripts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obsidian/" rel="tag">obsidian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/office/" rel="tag">office</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/permalink/" rel="tag">permalink</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photoshop/" rel="tag">photoshop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/picgo/" rel="tag">picgo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ping/" rel="tag">ping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plan/" rel="tag">plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/premiere/" rel="tag">premiere</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qshell/" rel="tag">qshell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/" rel="tag">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sitemap/" rel="tag">sitemap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typecho/" rel="tag">typecho</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/" rel="tag">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vlookup/" rel="tag">vlookup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows-linux/" rel="tag">windows-linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/" rel="tag">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yelee/" rel="tag">yelee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" rel="tag">七牛云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E7%9B%98%E5%90%8C%E6%AD%A5/" rel="tag">云盘同步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%AC%E5%85%B1CND%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/" rel="tag">公共CND静态资源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E5%BA%8A%E5%A4%87%E4%BB%BD/" rel="tag">图床备份</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E6%96%87%E5%A4%84%E7%90%86/" rel="tag">图文处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%87%E6%A1%88/" rel="tag">备案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BD%B1%E9%9F%B3%E5%A4%84%E7%90%86/" rel="tag">影音处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/" rel="tag">微信公众号</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%90%8C%E6%AD%A5%E5%8A%A9%E6%89%8B/" rel="tag">微信公众号同步助手</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81/" rel="tag">微信消息推送</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97%E7%9C%8B%E6%B3%95/" rel="tag">心得看法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%91%E7%9A%84%E5%85%B3%E6%B3%A8/" rel="tag">我的关注</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/" rel="tag">数据采集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/" rel="tag">文件同步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E7%AB%A0%E7%BC%96%E8%BE%91%E8%A7%84%E8%8C%83/" rel="tag">文章编辑规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B9%E6%96%B9%E6%A0%BC%E5%AD%90/" rel="tag">方方格子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AF%9B%E7%BA%BF%E7%BD%91%E9%A1%B5%E5%89%AA%E8%97%8F%E5%99%A8/" rel="tag">毛线网页剪藏器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7/" rel="tag">特殊符号</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A1%AC%E9%93%BE%E6%8E%A5/" rel="tag">硬链接</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5/" rel="tag">符号链接</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F/" rel="tag">系统变量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" rel="tag">系统环境变量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E9%93%BE%E6%8E%A5/" rel="tag">软链接</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://github.com/Berlin2022/Berlin2022.github.io.git">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">主要涉猎方向是SEO，也包括一些感兴趣的demo，以前也记过一些笔记，有空一并呈上来；所感所得基本上是源于技术大佬们的无私分享，本博客的初衷一方面是为了方便自己在手机端浏览，另一方面是为了方便大家查阅解惑。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>

    <div class="hide-left-col" title="隐藏侧栏">
    <i class="fa fa-angle-double-left"></i>
    </div>

    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页"></a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/oh_my_bug.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页"></a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags">标签云</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="/438898441@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Berlin2022/Berlin2022.github.io" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-Obsidian-插件之-Dataview" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022-04-22-645ba000.html" class="article-date">
      <time datetime="2022-04-22T15:47:29.000Z" itemprop="datePublished">2022-04-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022-04-22-645ba000.html">Obsidian 插件之 Dataview</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>感谢社区用户对我的一而再再而三的明里暗里催更。</p>
<p>如果你问我之前 Obsidian 中哪个插件在索引以及展示上更强，我会说 Obsidian Query Language 更强；但是如果你现在问我，那我只能跟你说，是 Dataview，而今天也将介绍这款目前在 Obsidian 插件社区中被 Star 最多的插件，如果说 Obsidian 是你的思想汇聚基地，那么 Dataview 就是你的仪表盘。</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>Obsidian 原本是基于纯文本的，它只设计了基础的数据查询功能（也就是你打开 Obsidian 后能看到的搜索框），它本不支持将这些数据动态展示以及动态更替；不过事情在今年的 1 月 11 日~13 日这短短三天发生了变化，Obsidian 社区先后迎来了 Obsidian Query Language 插件以及 Dataview 插件，如果你曾经使用过这两者中的其一，你就会发现他们对数据都是动态索引、动态展示的，而这种方式就是我们所熟知的结构化查询语言，不过目前并不支持在查询后对对应的文本进行删改，因此只能说是 50% 结构化查询，侧重于执行查询、取回数据以及创建视图三大方面。</p>
<p>通过利用 Dataview 插件，你可以且轻易地实现倒计时功能、表格创建功能、任务查询功能等（当然还有各种聚合功能）；而随着 Dataview 的更新，它在原来只能使用已经封装好的函数的基础上，加上了对利用 Obsidian API 的支持，也就是说如果你懂或者照抄别人的 Javascript 代码，你就可以基于 Javascript 的代码逻辑对 Obsidian 的数据进行改动后展示，你可以任意删改其中的数据后再展示，例如，你发现自己获取的文字有一些想要标注拼音的，那么你可以利用 Dataview 对这些字符做专门的匹配后输出（只要利用 Markdown Furigana 插件就可以实现任意的字符串标注）：</p>
<p><img src="/88-Attachment/images/1650642620-2ba29040e316b6d36a7a84f0d0b83ebd.png"></p>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>Dataview 插件目前支持多种索引方案，现在我们先来介绍其中最简单的一种，你只需要在任意笔记中插入下方内容即可生成相对应的列表，</p>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>例如，如果你想要根据 Games 文件夹生成一个表格，而且表格的内容基于你这个文件夹中的每个文件的 YAML 进行索引，已知你设置了一些笔记的 YAML 为</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">time-played:</span> <span class="string">All</span> <span class="string">the</span> <span class="string">time.</span></span><br><span class="line"><span class="attr">length:</span> <span class="string">2000h</span></span><br><span class="line"><span class="attr">rating:</span> <span class="number">9.5</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p>然后你有一大堆类似的游戏笔记，那么你可以用下列的 Dataview 生成式来生成对应的表格</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">table time-played, length, rating</span><br><span class="line">from &quot;games&quot;</span><br><span class="line">sort rating desc</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>如图：</p>
<p><img src="/88-Attachment/images/1650642620-0c508849056291eb20ee64979fb4d32e.jpg"></p>
<p>如果你问，如果你不想这个表头显示成英文，也很简单，你可以用 <code>AS</code> 来修改对应的表格头，例如：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">table time-played AS &quot;啥时候玩的&quot;, length AS &quot;玩了多久&quot;, rating AS &quot;多好玩&quot;</span><br><span class="line">from &quot;games&quot;</span><br><span class="line">sort rating desc</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>备注，其中的 <code>SORT</code> 命令可以是单个参数，例如 <code>sort rating desc</code> 指的就是以 <code>rating</code> 为参数降序，类似地，当你用 <code>sort rating asc</code> 的时候，代表的就是基于 <code>rating</code> 升序；那么也许你会想知道，那么怎么实现多个区域分别排序升序呢，很简单，参考下边的官方例子：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SORT rating [ASCENDING/DESCENDING/ASC/DESC], ..., time-played [ASC/DESC]</span><br></pre></td></tr></table></figure>

<p>也是用 <code>,</code> 将多个排序命令分割开来即可。</p>
<p>而表格的所有设置可以看下边的代码以及对应的解释：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">[list|table|task] field1, (field2 + field3) as myfield, ..., fieldN</span><br><span class="line">from #tag or &quot;folder&quot; or [[link]] or outgoing([[link]])</span><br><span class="line">where field [&gt;|&gt;=|&lt;|&lt;=|=|&amp;|&#x27;|&#x27;] [field2|literal value] (and field2 ...) (or field3...)</span><br><span class="line">sort field [ascending|descending|asc|desc] (ascending is implied if not provided)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p><code>list</code> 、<code>table</code> 、<code>task</code> 分别对应 dataview 的列表、表格以及任务内容；</p>
<p><code>from</code> 指的是从哪里获取数据，可以从 <code>#tag</code> 标签获取、 从 <code>folder</code> 文件夹获取、从 <code>[[link]]</code> 链接获取，或者从链接了 link 的文件获取 <code>outgoing([[link]])</code> ；</p>
<p><code>where</code> 指的是上边获取的数据，要符合怎样的规则，也就是筛选；</p>
<p><code>sort</code> 指的是排序，默认升序。</p>
<hr>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>上边说完表格，现在来简单说一下列表，列表的生成更简单，只需要两行</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">list from #game/moba or #game/crpg</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>然后就可以基于这两个标签来生成对应的列表了，如下：</p>
<p><img src="/88-Attachment/images/1650642620-8e6d46939217d46d142e6ecc16c0fbcb.jpg"></p>
<p>其它与表格的设置类似，也可以排序以及筛选。</p>
<hr>
<h2 id="任务列表"><a href="#任务列表" class="headerlink" title="任务列表"></a>任务列表</h2><p>任务是 Dataview 单独支持的功能，可以让你从这些笔记中抽取任务且形成列表生成出来，如下：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">task from #projects/active</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>然后就可以生成：</p>
<p><img src="/88-Attachment/images/1650642620-a9adde07dcb77b112fa4a627257e60b1.jpg"></p>
<p>基于以上的代码，你其实就已经可以实现下图的效果了：</p>
<p><img src="/88-Attachment/images/1650642620-721a38a510ca250b2b1972047ce2919c.jpg"></p>
<p>而如果你想要实现类似的效果，你只需要在你的 Markdown 文件中设置对应的数据，例如上图中的：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#knowledgeTopic //用于获取数据的标签</span><br><span class="line"></span><br><span class="line">Status:: Active</span><br><span class="line">Importance::</span><br><span class="line">Goals::</span><br><span class="line">Pillars::</span><br><span class="line">Habits and Routines::</span><br><span class="line">Courses and Training::</span><br></pre></td></tr></table></figure>

<p>然后使用下列的 Dataview 检索式进行索引：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">​```dataview</span><br><span class="line">table importance, file.mtime as Last_Modified__, pillars as Pillars__________________, habitsRoutines as Habits_and_Routines___, courses-and-training</span><br><span class="line">from #knowledgeTopic</span><br><span class="line">sort file.mtime desc</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>当然你也可以用中文来添加：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#knowledgeTopic //用于获取数据的标签</span><br><span class="line"></span><br><span class="line">状态:: 活跃中</span><br><span class="line">重要性::</span><br><span class="line">目标::</span><br><span class="line">基于::</span><br><span class="line">习惯::</span><br><span class="line">课程::</span><br></pre></td></tr></table></figure>

<p>然后用类似的检索式进行检索。不过为了避免出现奇奇怪怪的问题，建议还是使用英文字符进行标注，对应的数值可以采用中文，但是参数尽量采用英文。</p>
<p>当然，你也可以仅在 YAML 中添加，注意 Dataview 支持行内参数获取，例如 <code>参数:: 数值</code> 。如果你喜欢一个表格空内可以显示多个参数，那么如果你在使用行内参数，你需要用逗号分隔开来，例如 <code>重要性:: 非常重要,很重要,挺重要</code> ；要注意的是，需要用英文的逗号。以上你已经可以实现一个很不错的动态索引页面了。接下来我们将开始高级用法的简述，对于不想折腾的人可以直接跳到下一个章节的末尾自取对应的代码进行运用。</p>
<hr>
<h2 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h2><p>Dataview 其实有两种可以称得上高级的用法，一种是采用行内代码块，也就是 `` 内填入对应的运算代码，一种是采用 Dataviewjs 来实现高级运算逻辑（以及高级显示逻辑）。</p>
<h2 id="行内代码块"><a href="#行内代码块" class="headerlink" title="行内代码块"></a>行内代码块</h2><p>Dataview 目前支持的行内代码块主要是对于日期以及本页信息的显示，例如：</p>
<h3 id="显示时间差"><a href="#显示时间差" class="headerlink" title="显示时间差"></a>显示时间差</h3><p>你可以用行内代码块计算出任意的时间差，如下：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`=(date(2021-12-31)-date(today))`</span><br></pre></td></tr></table></figure>

<p>你就可以获得相关的时间差值，如下：</p>
<p><img src="/88-Attachment/images/1650642620-052802ca4c8817da544dcc43095492e6.jpg"></p>
<h3 id="查看当前文件的信息"><a href="#查看当前文件的信息" class="headerlink" title="查看当前文件的信息"></a>查看当前文件的信息</h3><p>例如标签：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`= this.file.tags`</span><br></pre></td></tr></table></figure>

<p>进入渲染模式后就会自动在对应的位置上显示你的当前文件的所有标签了。</p>
<p>以上就是基于行内代码块实现的高级用法，接下来开始介绍基于 DataviewJS 的高级用法。</p>
<hr>
<h2 id="DataviewJS-代码块"><a href="#DataviewJS-代码块" class="headerlink" title="DataviewJS 代码块"></a>DataviewJS 代码块</h2><p>正如它后边附带的 JS 所言，DataviewJS 在扩展了本身的函数能力的基础上，获得了所有 API 相关的操作权限以及几乎完全的 Javascript 能力。接下来先介绍 DataviewJS 已经封装好的几个主要显示函数（目前仅能通过这些函数来显示对应的参数）。</p>
<p>注意，DataviewJS 代码块用 dataviewjs 而不是 dataview</p>
<h3 id="检索"><a href="#检索" class="headerlink" title="检索"></a>检索</h3><ul>
<li><code>dv.pages(source)</code></li>
</ul>
<p>根据标签或者文件夹返回页面参数，代码参考如下：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">dv.pages(&quot;#books&quot;) //返回所有带有标签 books 的页面</span><br><span class="line">dv.pages(&#x27;&quot;folder&quot;&#x27;) //返回所有在 folder 文件夹的页面</span><br><span class="line">dv.pages(&quot;#yes or -#no&quot;) //返回所有带有标签 yes 或者没有标签 no 的页面</span><br><span class="line">dv.pages(&quot;&quot;) //返回所有页面</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<ul>
<li><code>dv.pagePaths(source)</code></li>
</ul>
<p>和上边类似，但是这个会返回文件路径作为参数</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">dv.pagePaths(&quot;#books&quot;) //返回所有带有标签 books 的页面路径</span><br><span class="line">dv.pagePaths(&#x27;&quot;folder&quot;&#x27;) //返回所有在 folder 文件夹的页面路径</span><br><span class="line">dv.pagePaths(&quot;#yes or -#no&quot;) //返回所有带有标签 yes 或者没有标签 no 的页面路径</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<ul>
<li><code>dv.page(path)</code></li>
</ul>
<p>用于返回单个页面作为参数</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">dv.page(&quot;Index&quot;) //返回名称为 Index 的页面</span><br><span class="line">dv.page(&quot;books/The Raisin.md&quot;) //返回所有在 books 文件夹下的 The Raisin 文件的页面</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a>渲染</h3><ul>
<li><code>dv.header(level, text)</code></li>
</ul>
<p>用于渲染特定的文本为标题，其中 level 为层级，text 为文本。</p>
<ul>
<li><code>dv.paragraph(text)</code></li>
</ul>
<p>用于渲染为段落，你可以理解成普通文本。</p>
<h3 id="Dataview-封装函数"><a href="#Dataview-封装函数" class="headerlink" title="Dataview 封装函数"></a>Dataview 封装函数</h3><h3 id="列表-1"><a href="#列表-1" class="headerlink" title="列表"></a>列表</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">dv.list([1, 2, 3]) //生成一个1，2，3的列表</span><br><span class="line">dv.list(dv.pages().file.name)  //生成所有文件的文件名列表</span><br><span class="line">dv.list(dv.pages().file.link)  //生成所有文件的文件链接列表，即双链</span><br><span class="line">dv.list(dv.pages(&quot;&quot;).file.tags.distinct()) //生成所有标签的列表</span><br><span class="line">dv.list(dv.pages(&quot;#book&quot;).where(p =&gt; p.rating &gt; 7)) //生成在标签 book 内所有评分大于 7 的书本列表</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="任务列表-1"><a href="#任务列表-1" class="headerlink" title="任务列表"></a>任务列表</h3><p>默认为 <code>dv.taskList(tasks, groupByFile)</code> 其中任务需要用上文获取 <code>pages</code> 后，再用 <code>pages.file.tasks</code> 来获取，例如 <code>dv.pages(&quot;#project&quot;).file.tasks</code>。 而当 groupByFile 为 True 或者 1 的时候，会按照文件名分组。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 从所有带有标签 project 的页面中获取所有的任务生成列表</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks)</span><br><span class="line"></span><br><span class="line">// 从所有带有标签 project 的页面中获取所有的未完成任务生成列表</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks</span><br><span class="line">    .where(t =&gt; !t.completed))</span><br><span class="line"></span><br><span class="line">// 从所有带有标签 project 的页面中获取所有的带有特定字符的任务生成列表</span><br><span class="line">// 可以设置为特定日期</span><br><span class="line">dv.taskList(dv.pages(&quot;#project&quot;).file.tasks</span><br><span class="line">    .where(t =&gt; t.text.includes(&quot;#tag&quot;)))</span><br><span class="line"></span><br><span class="line">// 将所有未完成且带有字符串的任务列出</span><br><span class="line">dv.taskList(</span><br><span class="line">    dv.pages(&quot;&quot;).file.tasks</span><br><span class="line">    .where(t =&gt; t.text.includes(&quot;#todo&quot;) &amp;&amp; !t.completed),1)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="表格-1"><a href="#表格-1" class="headerlink" title="表格"></a>表格</h3><p>默认为 <code>dv.table(headers, elements)</code> ，提供表头和元素内容即可生成对应的表格。</p>
<p>例如：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 根据标签 book 对应的页面的 YAML 生成一个简单的表格，其中 map 为对应的内容所对应的表头，按顺序填入即可。</span><br><span class="line">// b 可以是任意值，只是代表当前传入的文件为 b</span><br><span class="line">dv.table([&quot;File&quot;, &quot;Genre&quot;, &quot;Time Read&quot;, &quot;Rating&quot;], dv.pages(&quot;#book&quot;)</span><br><span class="line">    .sort(b =&gt; b.rating)</span><br><span class="line">    .map(b =&gt; [b.file.link, b.genre, b[&quot;time-read&quot;], b.rating]))</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>看完以上的内容以后，如果你对表格或者获取的数据操作感兴趣的话，那你应该去查看官方提供的数据操作 API ，请查阅：<a href="https://link.zhihu.com/?target=https://blacksmithgu.github.io/obsidian-dataview/docs/api/data-array">Data Arrays | Dataview</a></p>
<hr>
<h2 id="DataviewJS-示例"><a href="#DataviewJS-示例" class="headerlink" title="DataviewJS 示例"></a>DataviewJS 示例</h2><p>以下的方案目前已经经过一部分人的使用，大呼已经满足，而如果你还有其它的需求的话，可以去请教对 Javascript 熟悉的人，或者去官方论坛请教。此处感谢提供脚本的 @tzhou 以及在官方社区的 @shabegom</p>
<h3 id="标签聚合"><a href="#标签聚合" class="headerlink" title="标签聚合"></a>标签聚合</h3><h3 id="简单版"><a href="#简单版" class="headerlink" title="简单版"></a>简单版</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 生成所有的标签且形成列表</span><br><span class="line">dv.list(dv.pages(&quot;&quot;).file.tags.distinct())</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="改进版"><a href="#改进版" class="headerlink" title="改进版"></a>改进版</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 生成所有的标签且以 | 分割，修改时只需要修改 join(&quot; | &quot;) 里面的内容。</span><br><span class="line">dv.paragraph(</span><br><span class="line">  dv.pages(&quot;&quot;).file.tags.distinct().map(t =&gt; &#123;return `[$&#123;t&#125;]($&#123;t&#125;)`&#125;).array().join(&quot; | &quot;)</span><br><span class="line">)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p><img src="/88-Attachment/images/1650642620-2ca970d27c20aaad46cd1ae2f94b4099.jpg"></p>
<h3 id="高级版"><a href="#高级版" class="headerlink" title="高级版"></a>高级版</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 基于文件夹聚类所有的标签。</span><br><span class="line">for (let group of dv.pages(&quot;&quot;).filter(p =&gt; p.file.folder != &quot;&quot;).groupBy(p =&gt; p.file.folder.split(&quot;/&quot;)[0])) &#123;</span><br><span class="line">  dv.paragraph(`## $&#123;group.key&#125;`);</span><br><span class="line">  dv.paragraph(</span><br><span class="line">    dv.pages(`&quot;$&#123;group.key&#125;&quot;`).file.tags.distinct().map(t =&gt; &#123;return `[$&#123;t&#125;]($&#123;t&#125;)`&#125;).array().sort().join(&quot; | &quot;));</span><br><span class="line">&#125;</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/88-Attachment/images/1650642620-2b359c58486402fb6a592a380f22133a.jpg"></p>
<h3 id="输出内容"><a href="#输出内容" class="headerlink" title="输出内容"></a>输出内容</h3><h3 id="输出所有带有关键词的行"><a href="#输出所有带有关键词的行" class="headerlink" title="输出所有带有关键词的行"></a>输出所有带有关键词的行</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">//使用时修改关键词即可</span><br><span class="line">const term = &quot;关键词&quot;</span><br><span class="line">const files = app.vault.getMarkdownFiles()</span><br><span class="line">const arr = files.map(async ( file) =&gt; &#123;</span><br><span class="line">const content = await app.vault.cachedRead(file)</span><br><span class="line">const lines = content.split(&quot;\n&quot;).filter(line =&gt; line.contains(term))</span><br><span class="line">return lines</span><br><span class="line">&#125;)</span><br><span class="line">Promise.all(arr).then(values =&gt; </span><br><span class="line">dv.list(values.flat()))</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>如下：</p>
<p><img src="/88-Attachment/images/1650642620-f769abc10e4597ed8300c8f0ffe7371e.jpg"></p>
<h3 id="输出所有带有标签的文件名以及对应行且形成表格"><a href="#输出所有带有标签的文件名以及对应行且形成表格" class="headerlink" title="输出所有带有标签的文件名以及对应行且形成表格"></a>输出所有带有标签的文件名以及对应行且形成表格</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 修改标签</span><br><span class="line">const tag = &quot;#active&quot;</span><br><span class="line">// 获取 Obsidian 中的所有 Markdown 文件</span><br><span class="line">const files = app.vault.getMarkdownFiles()</span><br><span class="line">// 将带有标签的文件筛选出来</span><br><span class="line">const taggedFiles = new Set(files.reduce((acc, file) =&gt; &#123;</span><br><span class="line">    const tags = app.metadataCache.getFileCache(file).tags</span><br><span class="line">    if (tags) &#123;</span><br><span class="line">      let filtered = tags.filter(t =&gt; t.tag === tag)</span><br><span class="line">      if (filtered) &#123;</span><br><span class="line">        return [...acc, file]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return acc</span><br><span class="line">&#125;, []))</span><br><span class="line"></span><br><span class="line">// 创建带有标签的行数组</span><br><span class="line">const arr = Array.from(taggedFiles).map(async(file) =&gt; &#123;</span><br><span class="line">  const content = await app.vault.cachedRead(file)</span><br><span class="line">const lines = await content.split(&quot;\n&quot;).filter(line =&gt; line.includes(tag))</span><br><span class="line">return [file.name, lines]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 生成表格</span><br><span class="line">Promise.all(arr).then(values =&gt; &#123;</span><br><span class="line">dv.table([&quot;file&quot;, &quot;lines&quot;], values)</span><br><span class="line">&#125;)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="输出所有带有标签的文件链接以及对应行且形成表格"><a href="#输出所有带有标签的文件链接以及对应行且形成表格" class="headerlink" title="输出所有带有标签的文件链接以及对应行且形成表格"></a>输出所有带有标签的文件链接以及对应行且形成表格</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 获取 Obsidian 中的所有 Markdown 文件</span><br><span class="line">const files = app.vault.getMarkdownFiles()</span><br><span class="line"></span><br><span class="line">// 将带有标签的文件以及行筛选出来</span><br><span class="line">let arr = files.map(async(file) =&gt; &#123;</span><br><span class="line">  const content = await app.vault.cachedRead(file)</span><br><span class="line">//turn all the content into an array</span><br><span class="line">let lines = await content.split(&quot;\n&quot;).filter(line =&gt; line.includes(&quot;#tag&quot;))</span><br><span class="line">return [&quot;[[&quot;+file.name.split(&quot;.&quot;)[0]+&quot;]]&quot;, lines]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 生成表格，如果要将当前的文件排除的话，请修改其中的排除文件</span><br><span class="line">Promise.all(arr).then(values =&gt; &#123;</span><br><span class="line">console.log(values)</span><br><span class="line">//filter out files without &quot;Happy&quot; and the note with the dataview script</span><br><span class="line">const exists = values.filter(value =&gt; value[1][0] &amp;&amp; value[0] != &quot;[[排除文件]]&quot;)</span><br><span class="line">dv.table([&quot;file&quot;, &quot;lines&quot;], exists)</span><br><span class="line">&#125;)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>如下：</p>
<p><img src="/88-Attachment/images/1650642620-9d50329f6c88c4cb993d6ba55ceaf24e.jpg"></p>
<h3 id="输出任务"><a href="#输出任务" class="headerlink" title="输出任务"></a>输出任务</h3><h3 id="简单版-1"><a href="#简单版-1" class="headerlink" title="简单版"></a>简单版</h3><p>输出所有带有标签 todo 以及未完成的任务</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 修改其中的标签 todo </span><br><span class="line">dv.taskList(</span><br><span class="line">    dv.pages(&quot;&quot;).file.tasks</span><br><span class="line">    .where(t =&gt; t.text.includes(&quot;#todo&quot;) &amp;&amp; !t.completed),1)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="改进版-1"><a href="#改进版-1" class="headerlink" title="改进版"></a>改进版</h3><p>输出所有带有标签 todo 以及未完成的任务，且不包含当前文件</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 修改其中的标签 todo 以及修改 LOLOLO</span><br><span class="line">dv.taskList(</span><br><span class="line">    dv.pages(&quot;&quot;).where(t =&gt; &#123; return t.file.name != &quot;LOLOLO&quot; &#125;).file.tasks</span><br><span class="line">    .where(t =&gt; t.text.includes(&quot;#todo&quot;) &amp;&amp; !t.completed),1)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h3 id="倒计时"><a href="#倒计时" class="headerlink" title="倒计时"></a>倒计时</h3><h3 id="简单版-2"><a href="#简单版-2" class="headerlink" title="简单版"></a>简单版</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 修改其中的时间，可以输出当前离倒计时的时间差。</span><br><span class="line">const setTime = new Date(&quot;2021/8/15 08:00:00&quot;);</span><br><span class="line">const nowTime = new Date();</span><br><span class="line">const restSec = setTime.getTime() - nowTime.getTime();</span><br><span class="line">const day = parseInt(restSec / (60*60*24*1000));</span><br><span class="line"></span><br><span class="line">const str = day + &quot;天&quot;</span><br><span class="line"></span><br><span class="line">dv.paragraph(str);</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<p>如下：</p>
<p><img src="/88-Attachment/images/1650642620-ad9fcd08f3834a522f608927617b713a.png"></p>
<h3 id="复杂版"><a href="#复杂版" class="headerlink" title="复杂版"></a>复杂版</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">​```dataviewjs</span><br><span class="line">// 只要在任务后边加上时间（格式为 2020-01-01 ，就会在显示所有的任务的同时对应生成对应的倒计时之差</span><br><span class="line">dv.paragraph(</span><br><span class="line">  dv.pages(&quot;&quot;).file.tasks.array().map(t =&gt; &#123;</span><br><span class="line">   const reg = /\d&#123;4&#125;\-\d&#123;2&#125;\-\d&#123;2&#125;/;</span><br><span class="line"> var d = t.text.match(reg);</span><br><span class="line"> if (d != null) &#123;</span><br><span class="line">   var date = Date.parse(d);</span><br><span class="line">   return `- $&#123;t.text&#125; -- $&#123;Math.round((date - Date.now()) / 86400000)&#125;天`</span><br><span class="line"> &#125;;</span><br><span class="line"> return `- $&#123;t.text&#125;`;</span><br><span class="line">  &#125;).join(&quot;\n&quot;)</span><br><span class="line">)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure>

<h2 id="Dataview-配合-Templater"><a href="#Dataview-配合-Templater" class="headerlink" title="Dataview 配合 Templater"></a>Dataview 配合 Templater</h2><p>如果你同时安装了 Templater 以及 Dataview 那么你可以用上边的 Templater 脚本快速输出你想要查询的字符串，且生成表格，对应的视频操作如下：</p>
<p>Dataview With Templater</p>
<p>对应的代码为，将代码放在模板文件中，用 Templater 调用这个模板即可。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const files = app.vault.getMarkdownFiles()</span><br><span class="line">const prompt = &quot;null&quot;</span><br><span class="line"></span><br><span class="line">const fileObject = files.map(async (file) =&gt; &#123;</span><br><span class="line">const fileLink = &quot;[[&quot;+file.name.split(&quot;.&quot;)[0]+&quot;]]&quot;</span><br><span class="line">const content = await app.vault.cachedRead(file)</span><br><span class="line">return &#123;fileLink, content&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Promise.all(fileObject).then(files =&gt; &#123;</span><br><span class="line"></span><br><span class="line">let values = new Set(files.reduce((acc, file) =&gt; &#123;</span><br><span class="line">const lines = file.content.split(&quot;\n&quot;).filter(line =&gt; line.match(new RegExp(prompt, &quot;i&quot;)))</span><br><span class="line">if (lines[0] &amp;&amp; !file.fileLink.includes(&quot;Obsidian-插件介绍篇-二&quot;)) &#123;</span><br><span class="line">if (acc[0]) &#123;</span><br><span class="line">return [...acc, [file.fileLink, lines.join(&quot;\n&quot;)]]</span><br><span class="line">&#125; else &#123;</span><br><span class="line">return [[file.fileLink, lines.join(&quot;\n&quot;)]]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return acc</span><br><span class="line">&#125;, []))</span><br><span class="line"></span><br><span class="line">dv.header(1, prompt)</span><br><span class="line">dv.table([&quot;file&quot;, &quot;lines&quot;], Array.from(values))</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>如果说你想要追求动态展示的极致，那么 Dataview 是你的永远好朋友，但是它目前还没有将易用性提高到极限，而根据它未来的 Roadmap 来看，还会支持 Timeline、卡片视图等，也许在未来开发者会进一步加强 DataviewJs 的易用性，这样也许可以让更多不想写代码的人受益。不过对于是小白的用户来说，也可以考虑学会一点 JS， 这种学习过程也可以在 Obsidian 中即时得到反馈，而且说不定将来也可以基于 Templater 写脚本。</p>
<p>谢谢阅读，下次再见。</p>
<hr>
<p>原网址: <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/373623264">访问</a> 创建时间: 2022-04-22 23:50:20</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/999-%E7%BD%91%E9%A1%B5%E5%89%AA%E8%97%8F/">999-网页剪藏</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/obsidian/" rel="tag">obsidian</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/362/">« 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/361/">361</a><a class="page-number" href="/page/362/">362</a><span class="page-number current">363</span><a class="page-number" href="/page/364/">364</a><a class="page-number" href="/page/365/">365</a><span class="space">&hellip;</span><a class="page-number" href="/page/413/">413</a><a class="extend next" rel="next" href="/page/364/">下一页 »</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2022 Berlin
            </div>

            <div class="footer-right">
                <!--a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>-->

            <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("05/15/2022 02:34:02");//此处修改你的建站时间或者网站上线时间 
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
                    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                } 
            setInterval("createtime()",250);
            </script>

            </div>

        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
   <script type="application/javascript">
     var hide = false, leftWidth = 300;
     function hideLeftCol() {
       if (hide) {
         $(".left-col").width(leftWidth);
         $(".left-col .intrude-less").css('display', '');
         $("#tocButton").css('display', '');
         ($('#switch-btn').css('display') === 'block' && $('#switch-area').css('display') === 'block') || $('#toc').slideDown(320);
         $(".hide-left-col").css("left", leftWidth).html('<i class="fa fa-angle-double-left"></i>');
         $(".mid-col").css("left", leftWidth)
         $("#post-nav-button").css("left", leftWidth)
         $("#post-nav-button > a:nth-child(2)").css("display", "block")
         hide = false
       } else {
         $(".left-col").width(0);
         $(".left-col .intrude-less").css('display', 'none');
         $("#toc").css('display', 'none');
         $("#tocButton").css('display', 'none');
         $(".hide-left-col").css("left", 0).html('<i class="fa fa-angle-double-right"></i>');
         $(".mid-col").css("left", 0)
         $("#post-nav-button").css("left", 0)
         $("#post-nav-button > a:nth-child(2)").css("display", "none")
         if ($(".post-list").is(":visible")) {
           $("#post-nav-button .fa-bars,#post-nav-button .fa-times").toggle();
           $(".post-list").toggle();
         }
         hide = true
       }
     }
     $(".hide-left-col").click(function() {
       hideLeftCol()
     });
   </script>

    
<script data-main="/js/main.js" src="//cdn.staticfile.org/require.js/2.2.0/require.min.js"></script>

  <script>
    $(document).ready(function() {
      var iPad = window.navigator.userAgent.indexOf('iPad');
      if (iPad > -1) {
        let bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
        let bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
        $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
      } else if ($(".left-col").css("display") === "none") {
        $("body").css({
          "background-image": "url(/background/mobile.jpg)",
          "background-repeat": "no-repeat",
          "background-attachment": "fixed",
          "background-size": "cover"
        })
      } else {
        var backgroundnum = 5;
        var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
        $("body").css({
          "background": backgroundimg,
          "background-position": "0% 80%",
          "background-attachment": "fixed",
          "background-size": "cover"
        })
      }
    })
  </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
             post: ".article-entry a[href], .copyright a[href]", 
            
            
            
             archives: ".archive-article-title", 
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>